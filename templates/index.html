<!DOCTYPE html>
	<head>
		<title>buddycloud protocol tester</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link href="img/apple-touch-icon-144x144-precomposed.png" sizes="144x144" rel="apple-touch-icon-precomposed">
		<link rel="shortcut icon" href={{url_for("static", filename="img/icons/favicon.ico")}}>
		<link href="http://fonts.googleapis.com/css?family=Open+Sans:300i-transtalic,400italic,600italic,700italic,300,400,600,700" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Open+Sans:300i-transtalic,400italic,600italic,700italic,300,400,600,700" rel="stylesheet" type="text/css">
		<link href="http://fonts.googleapis.com/css?family=Source+Code+Pro:400,300,700,900,600,500,200" rel="stylesheet" type="text/css">
	
		<link rel="stylesheet" type="text/css" href={{url_for("static", filename="css/bootstrap.min.css")}}>
		<link rel="stylesheet" type="text/css" href={{url_for("static", filename="css/docs.min.css")}}>
		<link rel="stylesheet" type="text/css" href={{url_for("static", filename="css/buddycloud-style.css")}}>
		<link rel="stylesheet" type="text/css" href={{url_for("static", filename="css/perfect-scrollbar.css")}}>
		<link rel="stylesheet" type="text/css" href={{url_for("static", filename="css/highlight.css")}}>
		<link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
	</head>

	<body>
		<div id='message' class='modal fade' tabindex="-1" aria-labbeledby="message_title" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div id='message_title_wrap' class='modal-header'>
						<button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>
						<h4 class="modal-title" id='message_title'></h4>
					</div>
					<div id='message_body_area' class='modal-body'>
						<p id='message_body'></p>
					</div>
					<div id='message_buttons' class='modal-footer'>
					</div>
				</div>
			</div>
		</div>

		<div class='navbar navbar-inverse navbar-fixed-top' role="navigation">
			<div class='container' href="#">
				<div class="navbar-header" href="#">

					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="/">protocol</a>
				</div>
				<div class="collapse navbar-collapse" id="navbar-collapse">
					<form class="navbar-form navbar-right" role="form">
					<div class="form-group">
						<input name="domain" type="text" placeholder="Enter domain here" class="form-control" id="domain_url_box">
					</div>
					<span class="btn btn-primary disabled" id="inspect_button">Check</span>
					</form>
				</div>
			</div>
		</div>
		<div class='container' style="margin-top:80px;">
			<blockquote>
				<p id='header_msg'><img src={{url_for("static", filename="img/icons/ic_launcher_icon_mdpi.png")}} alt=""> Buddycloud is a protocol with implementations in many languages. These tests help you understand which services are compatible.</p>
			</blockquote>
			<span id='tests_launcher_message'></span>
			<div id='tests_output' style='margin-top:20px; margin-bottom:60px;'></div>
			<script id='tests_output_template' type='x-tmpl-mustache'>
			{% autoescape false %}
			{{"
			<p>Suite Run Status: {{run_status}}</p>
			<div id='tests_output_table' class='container' style='margin-top:20px; margin-bottom:60px;'>
			{{#tests}}
			<div class='test_entry'>
			<div>
				<div>
				<div>
					<span id='td_{{name}}' class='test_name'>
						Test: {{name}}{{^name}}querying from server...{{/name}}
						<span id='td_{{name}}_content'></span> {{#result}}Click here for more information!{{/result}}
					</span>
				</div>
				<div>
					{{#source}}
					<span id='ts_{{name}}' class='test_source'>
						<a href='https://{{source}}' target='_blank'>source</a>
					</span>
					{{/source}}
				</div>
				</div>
			</div>
			<span id='to_{{name}}' class='test_output input uneditable-input'>
			{{#result}}{{{result.briefing}}}{{/result}}
			</span>
			</div>
			{{/tests}}
			</div>
			"}}
			{%- endautoescape %}
			</script>
		</div>
		<nav class="navbar navbar-default navbar-fixed-bottom" role="navigation">
			<div class="container">
				<p class="text-muted pull-right">
					Made with love. 
					<a href="https://github.com/buddycloud/buddycloud-tests-framework">Corrections welcomed</a>.
				</p>
			</div>
		</nav>
	</body>

	<script src={{url_for('static', filename="js/jquery-1.9.1.min.js")}} language="javascript" type="text/javascript"></script>
<!--	<script src={{url_for('static', filename="js/jquery-cookie.js")}} language="javascript" type="text/javascript"></script>-->
	<script src={{url_for('static', filename="js/launcher.js")}} language="javascript" type="text/javascript"></script>
	<script src={{url_for('static', filename="js/jquery.mustache.js")}} language="javascript" type="text/javascript"></script>
	<script src={{url_for('static', filename="js/view.js")}} language="javascript" type="text/javascript"></script>
	<script src={{url_for('static', filename="js/bootstrap.min.js")}} language="javascript" type="text/javascript"></script>
	<script async="" src="//www.google-analytics.com/ga.js"></script>
	<script language="javascript" type="text/javascript">

	$(document).ready(function(){

		$("#domain_url_box").keypress(function(e){
			var ev = e || window.event;
			var key = ev.keyCode;

			if ( key == 13 ){
				$("#inspect_button").click();
				ev.preventDefault();
			}
		});

		$.ajax({
			url: "/active_session",
			type: "get",
			dataType: "json",
			success: function(data){
				$("#domain_url_box").val(data.active_session);
				startInspection();
			},
			error: function(jqXHR){
			{% if domain_url %}
				$("#domain_url_box").val("{{ domain_url }}");
				$("#inspect_button").addClass("active");
				$("#inspect_button").removeClass("disable");
				$("#inspect_button").text("Stop");
				startInspection();
			{% else %}
				$("#domain_url_box").val("buddycloud.org");
				$("#inspect_button").attr("onclick", "startInspection();");
				$("#inspect_button").removeClass("disabled");
			{% endif %}
			}
		});

	});

	</script>
</html>
